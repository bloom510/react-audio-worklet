(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,o){},107:function(e,t,o){},167:function(e,t,o){"use strict";o.r(t);var s=o(1),a=o.n(s),r=o(6),n=o.n(r),i=(o(101),o(103),o(57)),l=o.n(i),c=o(77),d=o(78),u=o(79),h=o(93),p=o(80),m=o(94),g=o(81),y=o.n(g),k=(o(107),o(169)),b=o(170),f=o(76),v=o(92),w=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={selected:null,moduleLoaded:!1,isPlaying:!1},e.menu=a.a.createElement(k.a,{onClick:function(t){return e.handleSelect(t)},selectedKeys:[e.state.current]},a.a.createElement(k.a.Item,{key:"Bypass Filter",custom:"prop"},"Bypass Filter"),a.a.createElement(k.a.Item,{key:"One Pole Filter"},"One Pole Filter"),a.a.createElement(k.a.Item,{key:"Noise"},"Noise"),a.a.createElement(k.a.Item,{key:"Bitcrusher"},"Bitcrusher")),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"loadModule",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.actx,e.prev=1,e.next=4,o.audioWorklet.addModule("worklet/".concat(t,".js"));case 4:this.setState({moduleLoaded:!0}),console.log("loaded module ".concat(t)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({moduleLoaded:!1}),console.log("Failed to load module ".concat(t));case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"bypassProcessor",value:function(){var e=this.actx;this.bypasserNode=new AudioWorkletNode(e,"bypass-processor"),this.oscillator=e.createOscillator(),this.oscillator.connect(this.bypasserNode).connect(e.destination),this.oscillator.start()}},{key:"onePoleProcessor",value:function(){var e=this.actx,t=e.currentTime,o=e.currentTime+4,s=e.currentTime+8;this.filterNode=new AudioWorkletNode(e,"one-pole-processor"),this.oscillator=e.createOscillator(),this.oscillator.connect(this.filterNode).connect(e.destination),this.oscillator.start(),this.filterNode.parameters.get("frequency").setValueAtTime(.01,t).exponentialRampToValueAtTime(.5*e.sampleRate,o).exponentialRampToValueAtTime(.01,s)}},{key:"noiseGenerator",value:function(){var e=this.actx,t=new OscillatorNode(e),o=new GainNode(e);this.noiseGeneratorNode=new AudioWorkletNode(e,"noise-generator"),this.noiseGeneratorNode.connect(e.destination);var s=this.noiseGeneratorNode.parameters.get("amplitude");t.connect(o).connect(s),t.frequency.value=.5,o.gain.value=.75,t.start()}},{key:"bitCrusherProcessor",value:function(){var e=this.actx;this.oscillator=e.createOscillator(),this.bitCrusherNode=new AudioWorkletNode(e,"bit-crusher-processor");var t=this.bitCrusherNode.parameters.get("bitDepth"),o=this.bitCrusherNode.parameters.get("frequencyReduction");this.oscillator.type="sawtooth",this.oscillator.frequency.value=5e3,t.setValueAtTime(1,0),this.oscillator.connect(this.bitCrusherNode).connect(e.destination);var s=e.currentTime,a=e.currentTime+4,r=e.currentTime+8;o.setValueAtTime(.01,s),o.linearRampToValueAtTime(.1,a),o.exponentialRampToValueAtTime(.01,r),this.oscillator.start(),this.oscillator.stop(r)}},{key:"handleSelect",value:function(e){if(this.setState({selected:e.key,moduleLoaded:!1}),!this.actx)try{console.log("New context instantiated"),this.actx=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.log("Sorry, but your browser doesn't support the Web Audio API!",e)}switch(e.key){default:return;case"Bypass Filter":this.loadModule("bypass-processor");break;case"One Pole Filter":this.loadModule("one-pole-processor");break;case"Noise":this.loadModule("noise-generator");break;case"Bitcrusher":this.loadModule("bit-crusher-processor")}}},{key:"handleClick",value:function(){var e=this.state;switch(e.selected&&this.setState({isPlaying:!e.isPlaying}),e.selected){case"Bypass Filter":e.isPlaying?(console.log("stopping ".concat(e.selected)),this.bypasserNode.port.postMessage(!1)):(console.log("playing ".concat(e.selected)),this.bypassProcessor(),this.bypasserNode.port.postMessage(!0));break;case"One Pole Filter":e.isPlaying?(console.log("stopping ".concat(e.selected)),this.filterNode.port.postMessage(!1)):(console.log("playing ".concat(e.selected)),this.onePoleProcessor(),this.filterNode.port.postMessage(!0));break;case"Noise":e.isPlaying?(console.log("stopping ".concat(e.selected)),this.noiseGeneratorNode.port.postMessage(!1)):(console.log("playing ".concat(e.selected)),this.noiseGenerator(),this.noiseGeneratorNode.port.postMessage(!0));break;case"Bitcrusher":e.isPlaying?(console.log("stopping ".concat(e.selected)),this.bitCrusherNode.port.postMessage(!1)):(console.log("playing ".concat(e.selected)),this.bitCrusherProcessor(),this.bitCrusherNode.port.postMessage(!0))}}},{key:"render",value:function(){var e=this,t=this.state,o=this.menu;return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:y.a,className:"App-logo",alt:"logo"}),a.a.createElement("span",null,"React + AudioWorklet = \u2764"),a.a.createElement("div",{style:{float:"left",width:"100%"}},a.a.createElement(b.a,{overlay:o,size:"small"},a.a.createElement("a",{className:"ant-dropdown-link",href:"#"},t.selected?t.selected:"Select a module"," ",a.a.createElement(f.a,{type:"down"}))),a.a.createElement(v.a,{ghost:!0,onClick:function(){return e.handleClick()},style:{marginLeft:"1%"}},t.isPlaying?"Stop":"Start"))))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(a.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,o){e.exports=o.p+"static/media/logo.5d5d9eef.svg"},96:function(e,t,o){e.exports=o(167)}},[[96,2,1]]]);
//# sourceMappingURL=main.48b14726.chunk.js.map